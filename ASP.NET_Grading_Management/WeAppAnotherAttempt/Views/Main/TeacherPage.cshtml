
@{
    ViewBag.Title = "TeacherPage";
}
<html>
<head>
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <style>
        body {
            background-color: #ffe6ff;
        }

        .pagination a {
            color: black;
            float: left;
            padding: 8px 16px;
            text-decoration: none;
            background-color: pink;
        }

        #btn {
            background-color: #FFA07A; /* Green */
            border: none;
            color: white;
            padding: 15px 32px;
            margin-top: 10px;
            margin-left: 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
        }

        .tbl tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .tbl tr:hover {
            background-color: #ddd;
        }

        .tbl th {
            padding-top: 12px;
            padding-left: 10px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #FFA07A;
            color: white;
        }

        .tbl {
            font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 80%;
        }

            .tbl td, .tbl th {
                border: 1px solid #ddd;
                padding: 8px;
            }


        .pagination a:hover:not(.active) {
            background-color: #ddd;
        }


        #modif {
            display: flex;
            justify-content: space-evenly;
        }

        .btn {
            background-color: #FFA07A; /* Green */
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
        }

        .dv1 {
            background-color: #ffe6e6;
            font-family: Tahoma;
            color: #262626;
            padding-left: 20px;
            padding-right: 10px;
            padding-bottom: 15px;
            margin-left: 10px;
            margin-right: 10px;
            border-style: groove;
            border-color: #ffdacc;
            border-radius: 10px;
        }

        #hello {
            font-family: Tahoma;
            color: #262626;
            margin-left: 15px;
        }
    </style>


    <script>
   
           //function funque()
           //{
           //    console.log("a intrat in functie");
           //     var xmlhttp = new XMLHttpRequest();
           //      xmlhttp.onreadystatechange = function(){

           //          if(this.readyState == 4 && this.status == 200)
           //          {
           //              console.log("AM AJUNS AICI");
                        
           //             var s = "";
           //             var a;
           //             var len;
           //             var index = 0;
           //             tbstr1 = "<table id = \"tbl\"><tr><th>Student ID</th><th>Student Name</th><th>Group</th></tr>";
           //             tbstr2 = "</table>";
           //             try{
           //              a = JSON.parse(this.responseText);
           //              len = a.length;
           //              console.log(a);
           //             }
           //              catch(err){
           //                  console.log("caught an error");
           //              }


           //              var n = Math.min(index+4, len);
           //              s+=tbstr1;
           //             for(i = index;i<n;i++)
           //             {
           //                 //s+= a[i];
           //                 //s+="<br>";

           //                 s+="<tr>";
           //                 s+="<td>" + a[i][0] + "</td>"
           //                 s+="<td>" + a[i][1] + "</td>"
           //                 s+="<td>" + a[i][2] + "</td>"
           //                 s+="</tr>";

           //             }
           //             s+=tbstr2;
           //             index = 0;
           //             document.getElementById("studs").innerHTML = s;
           //             console.log(a);
           //             console.log(typeof a);
           //             $(document).ready(function(){
           //                 $("#back").click(function(){
           //                         var ss = "";
           //                         console.log(typeof index);
           //                         if(Math.min(index, 0) == 0){
           //                             console.log("aici");
           //                             index = index - 4;

           //                             n = Math.min(index + 4, len);
           //                         ss+=tbstr1;
           //                         for(i = index;i<n;i++)
           //                         {
           //                             // ss+= a[i];
           //                             // ss+="<br>";
           //                             ss+="<tr>";
           //                             ss+="<td>" + a[i][0] + "</td>"
           //                             ss+="<td>" + a[i][1] + "</td>"
           //                             ss+="<td>" + a[i][2] + "</td>"
           //                             ss+="</tr>";
           //                         }
           //                         ss+=tbstr2;

           //                         if(ss!=""){
           //                         document.getElementById("studs").innerHTML = ss;}}
           //                         console.log(index);


           //                 });

           //                 $("#front").click(function(){
           //                     var s = "";
           //                     if(index < len)
           //                     {
           //                         index = index + 4;
           //                         n = Math.min(len, index + 4);
           //                         s+=tbstr1;
           //                         for(i = index;i<n;i++)
           //                         {
           //                             //s+= a[i];
           //                             //s+="<br>";
           //                             s+="<tr>";
           //                             s+="<td>" + a[i][0] + "</td>"
           //                             s+="<td>" + a[i][1] + "</td>"
           //                             s+="<td>" + a[i][2] + "</td>"
           //                             s+="</tr>";
           //                         }

           //                         s+=tbstr2;
           //                         if(s!=""){
           //                         document.getElementById("studs").innerHTML = s;}}
           //                         console.log(index);
           //                 });
           //             });

           //          }




           //      };

           //      var gr = document.getElementById("stgroup").value;
           //      console.log("j jcwrrf -- " + gr);
           //      xmlhttp.open("GET", "~/Main/getLoazeOfGroup?gr=" + gr, true);
           //          xmlhttp.send()
           //          console.log(this.responseText);
           //          console.log("miau");
           //}

      

    </script>


</head>
<body>
    @using WebApplication2.Controllers;

    @{
        var name = "";
        name = Session["teachername"].ToString();

    }
    <h1 id="hello">
        Hello, @name
    </h1>

    <div id="modif">
        <div id="assign" class="dv1">
            <p class="parag">To assign a grade to a student, fill the blank fields, then press submit</p>
            <label for="studid">The unique id of the student: </label>
            <input type="text" id="studid" name="studid"><br><br>
            <label for="courseid"> Course: </label>
            <input type="text" id="course" name="course"><br><br>
            <label for="mark">Choose the mark</label>
            <select id="mark">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>

            </select>
            <br><br>
            <input type="submit" id="asgngrbtn" class="btn" value="Destroy a future">

        </div>


        <div id="update" class="dv1">
            <p class="parag">To update the grade of a student, select one loaza from the table, fill the blank fields, then press submit</p>
            @*<label for="grid">The id of the grade: </label>
            <input type="number" id="grid" name="grid" min="1" max="100000000"><br><br>*@
            <label for="studid">The unique id of the student: </label>
            <input type="text" id="studid" name="studid"><br><br>
            <label for="courseid"> Course: </label>
            <input type="text" id="course" name="course"><br><br>
            <label for="mark">Choose the mark</label>
            <select id="markup">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>

            </select>
            <br><br>
            <input type="submit" id="updtgrbtn" class="btn" value="Update mark">

        </div>

        <div id="delete" class="dv1">
            <p class="parag">To delete the grade of a student,select one loaza from the table, then press submit</p>
            @*<label for="grid">The id of the grade: </label>
            <input type="number" id="grid" name="grid" min="1" max="100000000"><br><br>*@
            <input type="submit" id="delgrbtn" class="btn" value="Delete mark">

        </div>

    </div>
    <script>




            $(document).ready(function(){
                $("#asgngrbtn").click(function(){
                    var stid = $('#assign').find('input[name="studid"]').val();
                    var course = $('#assign').find('input[name="course"]').val();
                    var e = document.getElementById("mark");
                    var mark = e.options[e.selectedIndex].value;
                    var ajaxurl = "profOps.php";
                    console.log(stid);console.log(course);console.log(mark);

                    $.ajax({
                        url:"/Main/addItem",
                        type:"post",
                        data: {'stid': stid,
                            'course': course,
                            'mark': mark,
                            //'id': "prof1234",
                            'action': "insert"
                    },
                        success: function(data){
                	      //  alert(data);
                        }
                    });

                });

                $("#updtgrbtn").click(function () {
                    var grid = localStorage.getItem("gradeID")
                    console.log(grid);
                    var stid = $('#update').find('input[name="studid"]').val();
                    var course = $('#update').find('input[name="course"]').val();
                    var e = document.getElementById("markup");
                    var mark = e.options[e.selectedIndex].value;
                    var ajaxurl = "profOps.php";
                    console.log(stid); console.log(course); console.log(mark);

                    if (confirm("Do you want to update this?")){

                        $.ajax({
                            url: "/Main/updateGrade",
                            type: "post",
                            data: {
                                'grid': grid,
                                'stid': stid,
                                'course': course,
                                'mark': mark,

                                'action': "update"
                            },
                            success: function (data) {
                                //  alert(data);
                            }
                        });
                }

                });




                $("#delgrbtn").click(function () {
                    var grid = localStorage.getItem("gradeID");

                    var ajaxurl = "profOps.php";

                    if (confirm("Do you want to delete this?")) {

                        $.ajax({
                            url: "/Main/deleteGrade",
                            type: "post",
                            data: {
                                'grid': grid,
                                'action': "delete"
                            },
                            success: function (data) {
                                //  alert(data);
                            }
                        });
                    }

                });


                 });





    </script>

    <div class="dv1">

        <label for="stgroup">Write the group you want to see: </label>
        <input type="number" id="stgroup" name="stgroup" min="1" max="100000000">
        <button  id="btnloaze"> Get loaze </button>
    </div>

    <p id="gradesOfPrunci"></p>
    <div class="pagination">
        <p id="tblloaze"></p>
        <p id="paginationp">PAGES</p>
    </div>
    <button id="logout">Log out</button>
    <script>
        $(document).ready(function () {


            $.get("/Main/getListOfGrades", function (data, status) {
                document.getElementById("gradesOfPrunci").innerHTML = data;
                $("#tbl2 tr").on('click', function (e) {
                    localStorage.setItem("gradeID", this.cells[0].innerHTML);
                    console.log('aici');
                    //e.stopPropagation();
                });
            });

            

            var tbl = document.getElementById("tbl2");
            if (tbl != null) {
                for (var i = 0; i < tbl.rows.length; i++) {
                    for (var j = 0; j < tbl.rows[i].cells.length; j++)
                        tbl.rows[i].cells[j].onclick = function () { console.log(this); };
                }
            }
            function getval(cel) {
                alert(cel.innerHTML);
            }

            $("#btnloaze").on("click", function () {
                $.get("/Main/getNoPagesOfGroup", { group_id: $("#stgroup").val() },
                    function (data, status) {
                        console.log(typeof data);
                        var pages = parseInt(data);
                        let txt = "";
                        //algoritmica aia cute de data trecuta nu mai merge, deci improvizam (sau furam idei de la mpp)
                        for (let i = 0; i < pages; i++)
                        {
                            let nr = 0;
                            nr = i + 1;
                            txt += '<button class = "pgbtn" id = ' + '"' + nr + '">' + nr + '</button>'
                        }
                        console.log(txt);
                        console.log($("#paginationp").innerText);

                        document.getElementById("paginationp").innerHTML = txt;
                        $(".pgbtn").click(function () {
                            $.get("/Main/getPageOfLoaze", { page: this.id, group_id: $("#stgroup").val() },
                                function (data, status) {
                                    console.log(data);
                                    document.getElementById("tblloaze").innerHTML = data;
                                }
                            )
                        });
                    });
            });



            $("#logout").click(function () {

                $.get("/Main/logOut", function () {
                    window.location.href = "/Main";
                });
            });
        });
    </script>

</body>

</html>

